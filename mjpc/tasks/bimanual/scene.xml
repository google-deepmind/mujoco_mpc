<mujoco model="vx300s scene">
  <compiler angle="radian" meshdir="assets" texturedir="assets" autolimits="true"/>

  <option cone="elliptic" impratio="10"/>

  <asset>
    <texture type="2d" file="interbotix_black.png"/>
    <material name="black" texture="interbotix_black"/>

    <mesh file="vx300s_1_base.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_2_shoulder.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_3_upper_arm.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_4_upper_forearm.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_5_lower_forearm.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_6_wrist.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_7_gripper.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_8_gripper_prop.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_9_gripper_bar.stl" scale="0.001 0.001 0.001"/>
    <mesh file="vx300s_10_gripper_finger.stl" scale="0.001 0.001 0.001"/>
  </asset>

  <default>
    <default class="vx300s">
      <joint axis="0 1 0"/>
      <position forcerange="-35 35"/>
      <default class="waist">
        <joint axis="0 0 1" range="-3.14158 3.14158" damping="2.86"/>
        <position ctrlrange="-3.14158 3.14158" kp="25"/>
      </default>
      <default class="shoulder">
        <joint range="-1.85005 1.25664" armature="0.004" frictionloss="0.06" damping="6.25"/>
        <position ctrlrange="-1.85005 1.25664" kp="76" forcerange="-57 57"/>
      </default>
      <default class="elbow">
        <joint range="-1.76278 1.6057" armature="0.072" frictionloss="1.74" damping="8.15"/>
        <position ctrlrange="-1.76278 1.6057" kp="106" forcerange="-25 25"/>
      </default>
      <default class="forearm_roll">
        <joint axis="1 0 0" range="-3.14158 3.14158" armature="0.060" damping="3.07"/>
        <position ctrlrange="-3.14158 3.14158" kp="35" forcerange="-10 10"/>
      </default>
      <default class="wrist_angle">
        <joint range="-1.8675 2.23402" damping="1.18"/>
        <position ctrlrange="-1.8675 2.23402" kp="8"/>
      </default>
      <default class="wrist_rotate">
        <joint axis="1 0 0" range="-3.14158 3.14158" damping="0.78"/>
        <position ctrlrange="-3.14158 3.14158" kp="7"/>
      </default>
      <default class="finger">
        <joint type="slide" armature="0.251" damping="10"/>
        <position ctrlrange="0.021 0.057" kp="300"/>
        <default class="left_finger">
          <joint range="0.021 0.057"/>
        </default>
        <default class="right_finger">
          <joint range="-0.057 -0.021"/>
        </default>
      </default>
      <default class="visual">
        <geom type="mesh" contype="0" conaffinity="0" density="0" group="2" material="black"/>
      </default>
      <default class="collision">
        <geom group="3" type="mesh"/>
        <default class="finger_collision">
          <geom condim="4" solimp="2 1 0.01" solref="0.01 1" friction="1 0.005 0.0001"/>
        </default>
      </default>
    </default>
  </default>

  <include file="vx300s_right.xml"/>
  <include file="vx300s_left.xml"/>

  <statistic center="0 0 0.1" extent="0.6"/>

  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.3 0.3 0.3" specular="0 0 0"/>
    <rgba haze="0.15 0.25 0.35 1"/>
    <global azimuth="140" elevation="-30"/>
  </visual>

  <asset>
    <texture type="skybox" builtin="gradient" rgb1="0.3 0.5 0.7" rgb2="0 0 0" width="512" height="3072"/>
    <texture type="2d" name="groundplane" builtin="checker" mark="edge" rgb1="0.2 0.3 0.4" rgb2="0.1 0.2 0.3"
      markrgb="0.8 0.8 0.8" width="300" height="300"/>
    <material name="groundplane" texture="groundplane" texuniform="true" texrepeat="5 5" reflectance="0.2"/>
  </asset>

  <worldbody>
    <light pos="0 0 1.5" dir="0 0 -1" directional="true"/>
    <geom name="floor" size="0 0 0.05" type="plane" material="groundplane"/>
  
    <body name="block">
      <freejoint/>
      <geom name="block" rgba="1 0 1 1" type="box" mass="0.01" size="0.03 0.03 0.03" pos="0.05 0 0.03"/>
      <!-- <geom name="blockp1" mass="0.01" type="box" size=".01 .01 .05" rgba="1 0 1 1"/>
      <geom name="blockp2" mass="0.01" type="box" pos="0.05 0 .05" size=".06 .01 .01" rgba="1 0 1 1"/>
      <geom name="blockp3" mass="0.01" type="box" pos="0 0.05 -0.05" size=".01 .06 .01" rgba="1 0 1 1"/> -->
      <site name="block0" pos="0.03 0.03 0.06" group="5"/>
      <site name="block1" pos="-.03 0.03 0.06" group="5"/>
      <site name="block2" pos="0.03 -.03 0.06" group="5"/>
      <site name="block3" pos="-.03 -.03 0.06" group="5"/>
      <site name="block4" pos="0.03 0.03 0.0" group="5"/>
      <site name="block5" pos="-.03 0.03 0.0" group="5"/>
      <site name="block6" pos="0.03 -.03 0.0" group="5"/>
      <site name="block7" pos="-.03 -.03 0.0" group="5"/>
    </body>

    <body name="goal" mocap="true">
      <geom name="goal" contype="0" conaffinity="0" rgba="0 1 0 0.5" type="box" size="0.03 0.03 0.03" pos="0.05 0.0 0.03"/>
      <!-- <geom name="goalp1" type="box" size=".01 .01 .05" contype="0" conaffinity="0" rgba="0 1 0 0.5"/>
      <geom name="goalp2" type="box" pos="0.05 0 .05" size=".06 .01 .01" contype="0" conaffinity="0" rgba="0 1 0 0.5"/>
      <geom name="goalp3" type="box" pos="0 0.05 -0.05" size=".01 .06 .01" contype="0" conaffinity="0" rgba="0 1 0 0.5"/> -->
      <site name="goal0" pos="0.03 0.03 0.06" group="5"/>
      <site name="goal1" pos="-.03 0.03 0.06" group="5"/>
      <site name="goal2" pos="0.03 -.03 0.06" group="5"/>
      <site name="goal3" pos="-.03 -.03 0.06" group="5"/>
      <site name="goal4" pos="0.03 0.03 0.0" group="5"/>
      <site name="goal5" pos="-.03 0.03 0.0" group="5"/>
      <site name="goal6" pos="0.03 -.03 0.0" group="5"/>
      <site name="goal7" pos="-.03 -.03 0.0" group="5"/>
    </body>
  </worldbody>

  <keyframe>
    <key name="home" qpos='0 0.29383 0.9322 0 -0.821245 0 0.057 -0.057 0 0.29383 0.9322 0 -0.821245 0 0.057 -0.057 0 0 0 1 0 0 0' /> 
  </keyframe>
</mujoco>
